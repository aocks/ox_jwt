<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Tips, Tricks, and Reasons for JSON Web Tokens (JWTs)</title>
<meta name="author" content="Emin Martinian"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.0/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.0/dist/theme/solarized.css" id="theme"/>

<link rel="stylesheet" href="custom.css"/>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Tips, Tricks, and Reasons for JSON Web Tokens (JWTs)</h1><p class="subtitle"></p>
<h2 class="author">Emin Martinian</h2>
</section>
<script>
// Setup highlightLineMapper and highlightSlide function

if (typeof highlightLineMapper === 'undefined') {
  var highlightLineMapper = {};
}

function highlightSlide(sectionId, lines) {
  highlightLineMapper[sectionId] = new Set(lines)
}
</script>
<section>
<section id="slide-orgea8828b">
<h2 id="orgea8828b">JWT: JSON Web Token</h2>
<p>
Used for authentication/authorization such as:
</p>


<ul>
<li>front-end client to access back-end or API server</li>
<li>compact, <a href="https://datatracker.ietf.org/doc/html/rfc7519">standardized</a>, secured, customizable</li>
<li>"state-less" alternative to cookies/sessions</li>
<li>slides/examples: <a href="https://github.com/aocks/ox_jwt">https://github.com/aocks/ox_jwt</a></li>

</ul>


<aside class="notes">
<ul>
<li>standard: <a href="https://datatracker.ietf.org/doc/html/rfc7519">RFC 7519</a></li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-org96f75b8">
<h2 id="org96f75b8">Why JWTs?</h2>
<p>
Imagine app with many features + servers + engineers:
</p>

<ul>
<li class="fragment appear">Load balance, payments, profiles, PII, DB</li>
<li class="fragment appear">Local/remote/international workers + consultants</li>
<li class="fragment appear">How to manage security?
<ul>
<li>Can't give everyone access to sensitive info</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org4e90170">
<h2 id="org4e90170">Authentication vs Validation</h2>
<aside class="notes">
<ul>
<li>Auth server manages passwords, takes credit cards, etc.</li>
<li>Must be secure and in sync; hard to load balance</li>
<li>Cannot let just any employee have access</li>

</ul>

</aside>


<div id="org3d755a8" class="figure">
<p><img src="images/jwt-auth-vs-app-start.jpg" alt="jwt-auth-vs-app-start.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org040c9df">
<h2 id="org040c9df">JWT: Authentication Request</h2>
<aside class="notes">
<p>
Managing the authentication server is more complicated.
</p>
<ul>
<li>Can't allow just anyone to access/maintain/deploy (has secrets)</li>
<li>Must maintain state (e.g., current user password) so hard to load balance</li>

</ul>

</aside>



<div id="org654e1fe" class="figure">
<p><img src="images/jwt-auth-vs-app-auth.jpg" alt="jwt-auth-vs-app-auth.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org9ebd8f8">
<h2 id="org9ebd8f8">JWT: Authentication Response</h2>

<div id="org9fa6bcd" class="figure">
<p><img src="images/jwt-auth-vs-app-auth-response.jpg" alt="jwt-auth-vs-app-auth-response.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org79a90e0">
<h2 id="org79a90e0">JWT: Application Request</h2>
<aside class="notes">
<ul>
<li>App Server validates JWT with public key (lower security needs)</li>
<li>No DB/state/sync/update; can be serverless</li>
<li>Checks JWT for rights + provides service</li>

</ul>

</aside>


<div id="org32b3a3c" class="figure">
<p><img src="images/jwt-auth-vs-app-request-app.jpg" alt="jwt-auth-vs-app-request-app.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org0b3f889">
<h2 id="org0b3f889">Separate Auth From Validation</h2>
<p>
Auth Server has <b><b>secrets</b></b>; needs <b><b>security</b></b> + maintenance
</p>

<ul>
<li class="fragment appear">App Server(s) needs public keys; low security</li>
<li class="fragment appear">Easy to deploy App Server(s); e.g., serverless</li>
<li class="fragment appear">Lower security for App Server(s), logs, debug, etc.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org0070ee9">
<h2 id="org0070ee9">What do JWTs look like?</h2>
<p>
Base64 encoded header.payload.signature:
</p>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="1"   ><code trim>HEADER:     { <span style="color: #8b2252;">"alg"</span>: <span style="color: #8b2252;">"EdDSA"</span>, <span style="color: #8b2252;">"typ"</span>: <span style="color: #8b2252;">"JWT"</span> }
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="2"   ><code trim>PAYLOAD:    {<span style="color: #8b2252;">"sub"</span>: <span style="color: #8b2252;">"a"</span>, <span style="color: #8b2252;">"name"</span>: <span style="color: #8b2252;">"arbitrary data"</span>, <span style="color: #8b2252;">"iat"</span>: 1 }
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="3"   ><code trim>SIGNATURE:  SU6aXJ0YbH7Vg1jROpQfvnhn98Rt9zBeS7-c5O9jH-L
            L5mQqMMFq61eZjf0tLLqExm-dckRUNa3-qT7R2SKmCw
            
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="4"   ><code trim>ENCODED JWT:   eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9
               .eyJzdWIiOiJhIiwibmFtZSI6ImIiLCJpYXQiOjF9
               .SU6aXJ0YbH7Vg1jROpQfvnhn98Rt9zBeS7-c5O9jH-L
                L5mQqMMFq61eZjf0tLLqExm-dckRUNa3-qT7R2SKmCw
</code></pre>
</div>


<p data-fragment-index="5" class="fragment appear">
Signed using EdDSA with secret key:
</p>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="5"   ><code trim>MC4CAQAwBQYDK2VwBCIEIC+D6rD2YbXtV0ccR3smoR0ynhVuyyqvplFLbQWDdAtn
</code></pre>
</div>


<aside class="notes">
<ul>
<li>Use <a href="https://jwt.io/#debugger-io">https://jwt.io/#debugger-io</a> to verify/validate/decode</li>
<li>You can put arbitrary data in the payload:
<ul>
<li>indicate username, roles, rights, restrictions, payments</li>

</ul></li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-org92b6933">
<h2 id="org92b6933">Main JWT Fields</h2>
<ul>
<li><b>sub</b>: Subject (username, email, etc.)</li>
<li><b>iat</b>: Issued at (useful for checking freshness)</li>
<li><b>exp</b>: Expiry (useful for managing life-cycle )</li>
<li><b>nbf</b>: Not before (useful for managing life-cycle )</li>

</ul>
</section>
</section>
<section>
<section id="slide-python-flask-example">
<h2 id="python-flask-example">Python/Flask Example</h2>
<ul>
<li>Easy to verify/decode using libraries (e.g., <code>pyjwt</code>)
<ul>
<li>can compose checks using decorators:</li>

</ul></li>

</ul>

<div class="org-src-container">

<pre  class="src src-python" id="example-flask-route"  ><code trim><span style="color: #228b22;">@app.route</span>(<span style="color: #8b2252;">'/support/urgent'</span>)  <span style="color: #b22222;"># </span><span style="color: #b22222;">built-in flask decorator</span>
<span style="color: #228b22;">@requires_jwt</span>                  <span style="color: #b22222;"># </span><span style="color: #b22222;">custom decorator to validate JWT</span>
<span style="color: #228b22;">@jwt_claims</span>([<span style="color: #8b2252;">'paid_support'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensures token is for premium user</span>
<span style="color: #228b22;">@jwt_iat</span>(datetime.timedelta(hours=24))  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensure recent token</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">support_urgent</span>():
    ... <span style="color: #b22222;"># </span><span style="color: #b22222;">process ending support request</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-python-flask-example-h-1">
<h2 id="python-flask-example-h-1">Python/Flask Example</h2>
<ul>
<li>Easy to verify/decode using libraries (e.g., <code>pyjwt</code>)
<ul>
<li>can compose checks using decorators:</li>

</ul></li>

</ul>

<script>highlightSlide('slide-python-flask-example-h-1', [1])</script>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@app.route</span>(<span style="color: #8b2252;">'/support/urgent'</span>)  <span style="color: #b22222;"># </span><span style="color: #b22222;">built-in flask decorator</span>
<span style="color: #228b22;">@requires_jwt</span>                  <span style="color: #b22222;"># </span><span style="color: #b22222;">custom decorator to validate JWT</span>
<span style="color: #228b22;">@jwt_claims</span>([<span style="color: #8b2252;">'paid_support'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensures token is for premium user</span>
<span style="color: #228b22;">@jwt_iat</span>(datetime.timedelta(hours=24))  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensure recent token</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">support_urgent</span>():
    ... <span style="color: #b22222;"># </span><span style="color: #b22222;">process ending support request</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-python-flask-example-h-2">
<h2 id="python-flask-example-h-2">Python/Flask Example</h2>
<ul>
<li>Easy to verify/decode using libraries (e.g., <code>pyjwt</code>)
<ul>
<li>can compose checks using decorators:</li>

</ul></li>

</ul>

<script>highlightSlide('slide-python-flask-example-h-2', [2])</script>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@app.route</span>(<span style="color: #8b2252;">'/support/urgent'</span>)  <span style="color: #b22222;"># </span><span style="color: #b22222;">built-in flask decorator</span>
<span style="color: #228b22;">@requires_jwt</span>                  <span style="color: #b22222;"># </span><span style="color: #b22222;">custom decorator to validate JWT</span>
<span style="color: #228b22;">@jwt_claims</span>([<span style="color: #8b2252;">'paid_support'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensures token is for premium user</span>
<span style="color: #228b22;">@jwt_iat</span>(datetime.timedelta(hours=24))  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensure recent token</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">support_urgent</span>():
    ... <span style="color: #b22222;"># </span><span style="color: #b22222;">process ending support request</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-python-flask-example-h-3">
<h2 id="python-flask-example-h-3">Python/Flask Example</h2>
<ul>
<li>Easy to verify/decode using libraries (e.g., <code>pyjwt</code>)
<ul>
<li>can compose checks using decorators:</li>

</ul></li>

</ul>

<script>highlightSlide('slide-python-flask-example-h-3', [3])</script>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@app.route</span>(<span style="color: #8b2252;">'/support/urgent'</span>)  <span style="color: #b22222;"># </span><span style="color: #b22222;">built-in flask decorator</span>
<span style="color: #228b22;">@requires_jwt</span>                  <span style="color: #b22222;"># </span><span style="color: #b22222;">custom decorator to validate JWT</span>
<span style="color: #228b22;">@jwt_claims</span>([<span style="color: #8b2252;">'paid_support'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensures token is for premium user</span>
<span style="color: #228b22;">@jwt_iat</span>(datetime.timedelta(hours=24))  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensure recent token</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">support_urgent</span>():
    ... <span style="color: #b22222;"># </span><span style="color: #b22222;">process ending support request</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-python-flask-example-h-4">
<h2 id="python-flask-example-h-4">Python/Flask Example</h2>
<ul>
<li>Easy to verify/decode using libraries (e.g., <code>pyjwt</code>)
<ul>
<li>can compose checks using decorators:</li>

</ul></li>

</ul>

<script>highlightSlide('slide-python-flask-example-h-4', [4])</script>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@app.route</span>(<span style="color: #8b2252;">'/support/urgent'</span>)  <span style="color: #b22222;"># </span><span style="color: #b22222;">built-in flask decorator</span>
<span style="color: #228b22;">@requires_jwt</span>                  <span style="color: #b22222;"># </span><span style="color: #b22222;">custom decorator to validate JWT</span>
<span style="color: #228b22;">@jwt_claims</span>([<span style="color: #8b2252;">'paid_support'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensures token is for premium user</span>
<span style="color: #228b22;">@jwt_iat</span>(datetime.timedelta(hours=24))  <span style="color: #b22222;"># </span><span style="color: #b22222;">ensure recent token</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">support_urgent</span>():
    ... <span style="color: #b22222;"># </span><span style="color: #b22222;">process ending support request</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgcc0f516">
<h2 id="orgcc0f516">Example of <code>@requires_jwt</code></h2>
<div class="org-src-container">

<pre  class="src src-python"   data-line-numbers='4|5'><code trim><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">requires_jwt</span>(func):
    <span style="color: #228b22;">@wraps</span>(func)
    <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">decorated</span>(*args, **kwargs):        
        <span style="color: #a0522d;">token</span> = request.headers.get(<span style="color: #8b2252;">"Authorization"</span>).split(<span style="color: #8b2252;">" "</span>)[1]
        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">not</span> token:
            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">'missing token'</span>, 401  <span style="color: #b22222;"># </span><span style="color: #b22222;">if no token return error   </span>
        <span style="color: #a020f0;">try</span>:
            g.<span style="color: #a0522d;">decoded_jwt</span> = jwt.decode(
                token, algorithms=[<span style="color: #8b2252;">'EdDSA'</span>],
                key=current_app.config[<span style="color: #8b2252;">'JWT_KEY'</span>])  <span style="color: #b22222;"># </span><span style="color: #b22222;">public key</span>
            <span style="color: #a020f0;">return</span> func(*args, **kwargs)
        <span style="color: #a020f0;">except</span> <span style="color: #228b22;">Exception</span> <span style="color: #a020f0;">as</span> problem:
            <span style="color: #a020f0;">return</span> f<span style="color: #8b2252;">'</span>{<span style="color: #a0522d;">problem</span>=}<span style="color: #8b2252;">'</span>, 401 <span style="color: #b22222;"># </span><span style="color: #b22222;">return 401 or other error code</span>
    <span style="color: #a020f0;">return</span> decorated
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgc6261b4">
<h2 id="orgc6261b4">Example of <code>@jwt_claims</code></h2>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">jwt_claims</span>(claims_list: typing.Sequence[<span style="color: #483d8b;">str</span>]):
    <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">make_decorator</span>(func):
        <span style="color: #228b22;">@wraps</span>(func)
        <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">decorated</span>(*args, **kwargs):        
            <span style="color: #a0522d;">missing</span> = [c <span style="color: #a020f0;">for</span> c <span style="color: #a020f0;">in</span> claims_list
                       <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">not</span> g.decoded_jwt.get(c)]
            <span style="color: #a020f0;">if</span> missing:
                <span style="color: #a020f0;">return</span> f<span style="color: #8b2252;">'Missing claims: </span>{missing}<span style="color: #8b2252;">'</span>, 401
            <span style="color: #a020f0;">return</span> func(*args, **kwargs)
        <span style="color: #a020f0;">return</span> decorated
    <span style="color: #a020f0;">return</span> make_decorator
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org5bde91d">
<h2 id="org5bde91d">Example Use Case: Proxy</h2>
<ul>
<li>Auth Server grants JWT letting Alice to act for Bob</li>
<li class="fragment appear">claims: <code>{"sub": "Alice", "proxy": "Bob"}</code></li>
<li class="fragment appear">Alice sends request combining to act for Bob</li>

</ul>
</section>
</section>
<section>
<section id="slide-org0d83c3a">
<h2 id="org0d83c3a">Example Use Case: Proxy</h2>
<ul>
<li>Auth Server grants JWT letting Alice to act for Bob</li>
<li>claims: <code>{"sub": "Alice", "proxy": "Bob"}</code></li>
<li>Alice sends request combining to act for Bob</li>

</ul>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@APP.route</span>(<span style="color: #8b2252;">"/issue"</span>)
<span style="color: #228b22;">@requires_jwt</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">issue</span>():
    <span style="color: #8b2252;">"Example route to create an issue."</span>
    <span style="color: #a0522d;">user</span> = g.decoded_jwt.get(<span style="color: #8b2252;">'proxy'</span>, g.decoded_jwt.get(<span style="color: #8b2252;">'sub'</span>))
    <span style="color: #a0522d;">msg</span> = f<span style="color: #8b2252;">'Created issue assigned to </span>{user}<span style="color: #8b2252;">.'</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">... Create the actual issue here</span>



    <span style="color: #a020f0;">return</span> msg
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orge3c36da">
<h2 id="orge3c36da">Example Use Case: Proxy</h2>
<ul>
<li>Auth Server grants JWT letting Alice to act for Bob</li>
<li>claims: <code>{"sub": "Alice", "proxy": "Bob"}</code></li>
<li>Alice sends request combining to act for Bob</li>

</ul>

<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #228b22;">@APP.route</span>(<span style="color: #8b2252;">"/issue"</span>)
<span style="color: #228b22;">@requires_jwt</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">issue</span>():
    <span style="color: #8b2252;">"Example route to create an issue."</span>
    <span style="color: #a0522d;">user</span> = g.decoded_jwt.get(<span style="color: #8b2252;">'proxy'</span>, g.decoded_jwt.get(<span style="color: #8b2252;">'sub'</span>))
    <span style="color: #a0522d;">msg</span> = f<span style="color: #8b2252;">'Created issue assigned to </span>{user}<span style="color: #8b2252;">.'</span>
    <span style="color: #b22222;"># </span><span style="color: #b22222;">... Create the actual issue here</span>
    <span style="color: #a0522d;">real_user</span> = g.decoded_jwt[<span style="color: #8b2252;">'sub'</span>]
    <span style="color: #a020f0;">if</span> real_user != user:
        <span style="color: #a0522d;">msg</span> += f<span style="color: #8b2252;">'</span><span style="color: #008b8b;">\n</span>{real_user}<span style="color: #8b2252;"> acted on behalf of </span>{user}<span style="color: #8b2252;">'</span>
    <span style="color: #a020f0;">return</span> msg
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org8240d9c">
<h2 id="org8240d9c">Caveats</h2>
<ul>
<li class="fragment appear">Beware using header fields to check signature
<ul>
<li>don't trust <code>alg</code> field or limit possibilities
<ul>
<li>e.g., <code>algorithms=['EdDSA']</code></li>

</ul></li>
<li>be careful with <code>kid</code>, <code>jku</code>, <code>jwk</code>, etc.</li>

</ul></li>
<li class="fragment appear">Don't simulate sessions with JWTs
<ul>
<li>Use access/refresh tokens to solve logout/revocation</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orge2ca101">
<h2 id="orge2ca101">Example JKU Header Attack</h2>
<ul>
<li>Header can provide URL for key (useful):
<ul>
<li><code class="src src-shell">{alg: <span style="color: #8b2252;">"EdDSA"</span>, jku: <span style="color: #8b2252;">"https://good.com/pk.json"</span>}</code></li>

</ul></li>
<li class="fragment appear">Attacker can replace JKU with their own key:
<ul>
<li><code class="src src-shell">{alg: <span style="color: #8b2252;">"EdDSA"</span>, jku: <span style="color: #8b2252;">"https://bad.com/pk.json"</span>}</code></li>

</ul></li>
<li class="fragment appear">Don't trust header (validate against whitelist)</li>

</ul>
</section>
</section>
<section>
<section id="slide-orge1441c0">
<h2 id="orge1441c0">Example ALG Header Attack</h2>
<ul>
<li>Header can provide URL for key (useful):
<ul>
<li><code class="src src-shell">{alg: <span style="color: #8b2252;">"EdDSA"</span>, jku: <span style="color: #8b2252;">"https://good.com/pk.json"</span>}</code></li>

</ul></li>
<li class="fragment appear">Attacker can replace ALG with symmetric version:
<ul>
<li><code class="src src-shell">{alg: <span style="color: #8b2252;">"HS256"</span>, jku: <span style="color: #8b2252;">"https://bad.com/pk.json"</span>}</code></li>

</ul></li>
<li class="fragment appear">Don't trust header (validate against whitelist)</li>

</ul>
</section>
</section>
<section>
<section id="slide-org74c7e54">
<h2 id="org74c7e54">Revocation via Access/Refresh</h2>
<ul>
<li>Problem: Can't cancel or logout a JWT</li>
<li class="fragment appear">Solution: Refresh/Access token
<ul>
<li>"refresh token" with long expiry</li>
<li>used to get access token w/o credential check</li>
<li>"access token" with short expiry</li>
<li>can be used to access services</li>

</ul></li>

</ul>


<aside class="notes">
<p>
On security events (role changes, credential changes, hacks), auth
server will invalidate refresh token + require new credential check.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org39ba30c">
<h2 id="org39ba30c">Get Refresh Token</h2>

<div id="org8f876eb" class="figure">
<p><img src="images/jwt-get-refresh.jpg" alt="jwt-get-refresh.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-orgd584513">
<h2 id="orgd584513">Get Access Token</h2>

<div id="org968301b" class="figure">
<p><img src="images/jwt-get-access.jpg" alt="jwt-get-access.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org15ecf49">
<h2 id="org15ecf49">Use Access Token</h2>

<div id="org0ee675f" class="figure">
<p><img src="images/jwt-use-access.jpg" alt="jwt-use-access.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org7949f4f">
<h2 id="org7949f4f">Revocation</h2>

<div id="org11a362f" class="figure">
<p><img src="images/jwt-revoke.jpg" alt="jwt-revoke.jpg" width="90%" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org3859c25">
<h2 id="org3859c25">Separate validation from parsing</h2>
<aside class="notes">
<p>
We can go one step beyond separating authentication from validation
and separate validation from parsing.
</p>

<ul>
<li>aside: NGINX+JWTs can protect stand-alone sites</li>

</ul>

</aside>

<ul>
<li>Can use middleware to verify signature</li>
<li class="fragment appear"><p>
e.g., NGINX can verify before passing to app server
</p>

<div id="orgdfa56f5" class="figure">
<p><img src="images/nginx-example.jpg" alt="nginx-example.jpg" />
</p>
</div></li>
<li class="fragment appear">See <a href="https://github.com/aocks/ox_jwt/blob/main/nginx/conf.d/example.conf#L44">example.conf</a> in <code>nginx</code> directory on <a href="https://github.com/aocks/ox_jwt">github.com/aocks/ox_jwt</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgf0e0763">
<h2 id="orgf0e0763">Summary and next steps</h2>
<aside class="notes">
<p>
If you are writing a small application, you can quickly and easily put
together a secure system using various JWT libraries.
</p>

<p>
If you are doing a full enterprise authentication system, you may want
to go with an existing platform. Many of those use JWTs under the hood
so it's still useful to have a high level understanding of the basic diea.
</p>

</aside>

<ul>
<li>Distributed trust can enable many use cases</li>
<li>JWTs = secure, efficient, standardized auth tool</li>
<li>Python decorators = nice way to validate claims</li>
<li class="fragment appear">Libraries:
<ul>
<li><a href="https://pyjwt.readthedocs.io/en/stable/">pyjwt</a>, <a href="https://flask-jwt-extended.readthedocs.io/en/stable/">flask-jwt-extended</a>, <a href="https://django-rest-framework-simplejwt.readthedocs.io/en/latest/">djangorestframework-simplejwt</a></li>

</ul></li>
<li class="fragment appear">Platforms:
<ul>
<li><a href="https://auth0.com">auth0</a>, <a href="https://supertokens.com/">supertokens</a>, <a href="https://docs.aws.amazon.com/cognito/">cognito</a>, <a href="https://www.keycloak.org/">keycloak</a></li>

</ul></li>
<li class="fragment appear">Slides/examples:  <a href="https://github.com/aocks/ox_jwt/">https://github.com/aocks/ox_jwt/</a></li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.0/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.0/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealNotes],
fragments:true, transition:'fade', margin: 0.0001, width:'100%'
});

</script>
<script src="custom_highlight.js"></script>
</body>
</html>
